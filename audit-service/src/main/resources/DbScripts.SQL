CREATE TABLE "AUDIT_API_CALLS"."SERVICE_AUDIT"
(
    "ID"                 NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    "SERVICE_NAME"       VARCHAR2(255 CHAR) NOT NULL ENABLE,
    "HOST_NAME"          VARCHAR2(255 CHAR) NOT NULL ENABLE,
    "REQUEST_URI"        VARCHAR2(255 CHAR) NOT NULL ENABLE,
    "REQUEST_BODY"       CLOB,
    "REQUEST_HEADERS"    CLOB,
    "REQUEST_METHOD"     VARCHAR2(255 CHAR) NOT NULL ENABLE,
    "REQUEST_TIMESTAMP"  TIMESTAMP(6) NOT NULL ENABLE,
    "RESPONSE_TIMESTAMP" TIMESTAMP(6),
    "RESPONSE_STATUS"    NUMBER(3,0),
    "RESPONSE"           CLOB,
    "DURATION"           NUMBER(10,0),
    "ERROR_MESSAGE"      VARCHAR2(255),
    CONSTRAINT PK_SERVICE_AUDIT_ID PRIMARY KEY (ID)
);

CREATE TABLE CLIENT_AUDIT
(
    ID               NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    SERVICE_AUDIT_ID number,
    EXTERNAL_API_URL VARCHAR2(255) NOT NULL,
    METHOD           VARCHAR2(10) NOT NULL,
    REQUEST_HEADERS  CLOB,
    REQUEST_BODY     CLOB,
    RESPONSE         CLOB,
    RESPONSE_STATUS  NUMBER(3),
    "DURATION"       NUMBER(10,0),
    "ERROR_MESSAGE"  VARCHAR2(255),
    CONSTRAINT FK_SERVICE_AUDIT_ID FOREIGN KEY (SERVICE_AUDIT_ID) REFERENCES SERVICE_AUDIT (ID) ON DELETE CASCADE
);



